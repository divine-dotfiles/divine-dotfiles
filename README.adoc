# Divine.dotfiles
:toc:

++++
<p align="center">
<em>Bash framework for dotfiles and everything Bash</em>
</p>
++++

[#divine-dotfiles-plaque]
image::lib/img/divine-dotfiles-plaque.png[Divine.dotfiles,align="center"]

New machine or new OS?
Set it up with a single `*di install --yes*`.

[NOTE]
--
`di` stands for **d**ivine **i**ntervention.

Every invocation of the framework is called _intervention_.
Live with it.
--

_Divine.ditfiles_ lets you keep your set-up routines as isolated *deployments* that are installed/removed in defined sequence.

## In a nutshell

### Example deployment

Let's scratch the surface.
Here's what a deployment file may look like:

[source,bash]
----
# grail/dpls/example.dpl.sh

d_dpl_check() {
  [ -e ~/bin/cmd ] && return 1 || return 2
}

d_dpl_install() {
  cat >~/bin/cmd <<<'echo Divine.dotfiles rocks' && chmod +x ~/bin/cmd
}

d_dpl_remove() {
  rm -f -- ~/bin/cmd
}
----

And here is what working with it looks like:

[#divine-dotfiles-example-1]
image::lib/img/divine-dotfiles-example-1.gif[Divine.dotfiles example 1,align="center"]

Dead simple, right?
You wouldn’t need a framework for that.
But there’s more, I promise:



## Installing and removing

### Installing

Run the following single command in Terminal:

[source,bash]
----
bash -c 'TMP=$(mktemp); URL=https://raw.github.com/no-simpler/divine-dotfiles/master/lib/install/install.sh; if curl --version &>/dev/null; then curl -fsSL $URL >$TMP; elif wget --version &>/dev/null; then wget -qO $TMP $URL; else printf >&2 "\n==> Error: failed to detect neither curl nor wget\n"; rm -f $TMP; exit 1; fi && chmod +x $TMP && $TMP "$@" || { printf >&2 "\n==> Error: failed to download installation script\n"; rm -f $TMP; exit 2; }' bash
----

NOTE: Installation is completely safe: it clones/downloads repository and creates one symlink.
Oh, and it asks for your permission for everything.

### Removing

Run the following single command in Terminal:

[source,bash]
----
bash -c 'TMP=$(mktemp); URL=https://raw.github.com/no-simpler/divine-dotfiles/master/lib/uninstall/uninstall.sh; if curl --version &>/dev/null; then curl -fsSL $URL >$TMP; elif wget --version &>/dev/null; then wget -qO $TMP $URL; else printf >&2 "\n==> Error: failed to detect neither curl nor wget\n"; rm -f $TMP; exit 1; fi && chmod +x $TMP && $TMP "$@" || { printf >&2 "\n==> Error: failed to download uninstallation script\n"; rm -f $TMP; exit 2; }' bash
----

NOTE: After asking for permission, this will erase entire installation directory, with all deployments in it.
Be careful.

### System requirements

- https://en.wikipedia.org/wiki/Unix-like[Unix-like OS] (including macOS and Linux) or https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux[WSL] on Windows
- Bash 3.2+
- Either `git` or `curl` or `wget` pre-installed
