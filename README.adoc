# Divine.dotfiles
:toc:

++++
<p align="center">
<em>Bash framework for dotfiles and everything Bash</em>
</p>
++++

[#divine-dotfiles-plaque]
image::lib/img/divine-dotfiles-plaque.png[Divine.dotfiles,align="center"]

New machine or new OS?
Set it up with a single `*di install --yes*`.

NOTE: `di` stands for **d**ivine **i**ntervention

_Divine.ditfiles_ lets you keep your set-up scripts as isolated *deployments* that are installed/removed in defined sequence.
Here’s what a deployment file may look like:

[source,bash]
----
# dpl/example.dpl.sh

# Special function that checks whether this deployment is installed
d_dpl_check() {
  if [ -e ~/bin/cmd ]; then return 1; else return 2; fi
}

# Special function that installs this deployment
d_dpl_install() {
  printf 'echo Divine.dotfiles is cool\n' >~/bin/cmd && chmod +x ~/bin/cmd
}

# Special function that removes this deployment
d_dpl_remove() {
  rm -f -- ~/bin/cmd
}
----

And here’s how working with it looks like:

// TODO: Insert .gif illustration here

## Installing and removing

### Installing

Run the following single command in Terminal:

[source,bash]
----
bash -c "$(TMP=$(mktemp); URL=https://raw.github.com/no-simpler/divine-dotfiles/master/lib/install/install.sh; if curl --version &>/dev/null; then curl -fsSL $URL >$TMP; elif wget --version &>/dev/null; then wget -qO $TMP $URL; else printf "%s\n" "printf >&2 '\n==> Error: failed to detect neither curl nor wget\n'; exit 1"; fi && cat $TMP || printf "%s\n" "printf >&2 '\n==> Error: failed to download installation script\n'; exit 2")" bash
----

NOTE: Installation is completely safe: it clones/downloads repository and creates one symlink.
Oh, and it asks for your permission for everything.

### Removing

Run the following single command in Terminal:

[source,bash]
----
bash -c "$(TMP=$(mktemp); URL=https://raw.github.com/no-simpler/divine-dotfiles/master/lib/uninstall/uninstall.sh; if curl --version &>/dev/null; then curl -fsSL $URL >$TMP; elif wget --version &>/dev/null; then wget -qO $TMP $URL; else printf "%s\n" "printf >&2 '\n==> Error: failed to detect neither curl nor wget\n'; exit 1"; fi && cat $TMP || printf "%s\n" "printf >&2 '\n==> Error: failed to download uninstallation script\n'; exit 2")" bash
----

NOTE: After asking for permission, this will erase entire installation directory, with all deployments in it.
Be careful.

### System requirements

- https://en.wikipedia.org/wiki/Unix-like[Unix-like OS] (including macOS and Linux) or https://en.wikipedia.org/wiki/Windows_Subsystem_for_Linux[WSL] on Windows
- Bash 3.2+
- Either `git` or `curl` or `wget` pre-installed
